<app-admin-navbar></app-admin-navbar>
<div class="title-wrap">
  <h3 class="title">Coupons</h3>
</div>
<div class="wrapper text-center">
  <table class="table table-striped table-hover">
    <thead class="thead-dark">
      <th>Code</th>
      <th>Description</th>
      <th>Discount</th>
      <th>Minimum Spend</th>
      <th>Expiry</th>
      <th></th>
    </thead>
    <tbody>
      <tr *ngFor="let coupon of coupons">
        <td>{{coupon.Code}}</td>
        <td>{{coupon.Description}}</td>
        <td>{{coupon.Discount}}</td>
        <td>{{coupon.MinimumSpend}}</td>
        <td>{{coupon.Expiry}}</td>
        <td>
          <button type="button" class="fas fa-pen" data-toggle="modal" data-target="#editForm"
            (click)="editFormClicked(coupon)"></button>
          <button type="button" class="fas fa-trash" (click)="deleteCoupon(coupon.Code)"></button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="insert-user">
    <button class="fas fa-plus plus" data-toggle="modal" data-target="#addForm">Add Coupon</button>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="editForm" data-backdrop="static" data-keyboard="false" tabindex="-1"
  aria-labelledby="editFormLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editFormLabel">Edit Coupon</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body m-auto">
        <form [formGroup]="myCouponEditForm">
          <table>
            <tr>
              <td><label for="code">Code: </label></td>
              <td><input type="text" name="code" id="code" class="form-control" formControlName="Code" readonly></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="desc">Description: </label></td>
              <td><textarea name="desc" id="desc" cols="30" rows="2" class="form-control"
                  formControlName="Description"></textarea></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="discount">Discount: </label></td>
              <td><input type="number" name="discount" id="discount" class="form-control" formControlName="Discount">
              </td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="spend">Minimum Spend: </label></td>
              <td><input type="number" name="spend" id="spend" class="form-control" formControlName="MinimumSpend"></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="date">Expiry: </label></td>
              <td><input type="date" name="date" id="date" class="form-control" formControlName="Expiry"></td>
            </tr>
          </table>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn" style="background-color: #d85c27; color:white"
          [disabled]="myCouponEditForm.invalid" (click)="editCoupon()">Save</button>
      </div>
    </div>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="addForm" data-backdrop="static" data-keyboard="false" tabindex="-1"
  aria-labelledby="addFormLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addFormLabel">Add Coupon</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body m-auto">
        <form [formGroup]="myCouponAddForm">
          <table>
            <tr>
              <td><label for="code">Code: </label></td>
              <td><input type="text" name="code" id="code" class="form-control" formControlName="Code"></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="desc">Description: </label></td>
              <td><textarea name="desc" id="desc" cols="30" rows="2" class="form-control"
                  formControlName="Description"></textarea></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="discount">Discount: </label></td>
              <td><input type="number" name="discount" id="discount" class="form-control" formControlName="Discount">
              </td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="spend">Minimum Spend: </label></td>
              <td><input type="number" name="spend" id="spend" class="form-control" formControlName="MinimumSpend"></td>
            </tr>
            <tr>
              <td colspan="2"><br /></td>
            </tr>
            <tr>
              <td><label for="date">Expiry: </label></td>
              <td><input type="date" name="date" id="date" class="form-control" formControlName="Expiry"></td>
            </tr>
          </table>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn" style="background-color: #d85c27; color:white"
          [disabled]="myCouponAddForm.invalid" (click)="addCoupon()">Save</button>
      </div>
    </div>
  </div>
</div>